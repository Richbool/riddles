<!DOCTYPE html>
<html>
<head>
    <title>元宵灯谜大会</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>🎆 元宵灯谜大会 - xrq-rich.com</h1>
        
        <!-- 添加灯谜表单 -->
        <div class="section">
            <h2>📝 添加新灯谜</h2>
            <form action="/" method="post" onsubmit="lockForm(this)">
                <input type="text" name="riddle" placeholder="输入灯谜内容" required>
                <input type="text" name="answer" placeholder="输入正确答案" required>
                <button type="submit">添加题库</button>
            </form>
        </div>

        <!-- 猜灯谜模块 -->
        <div class="section">
            <h2>🎯 猜灯谜</h2>
            {% if current_riddle %}
                <div class="riddle-box">
                    <p class="riddle-text">{{ current_riddle }}</p>
                    <form action="/guess" method="post" onsubmit="handleSubmit(this)">
                        <input type="text" name="answer" placeholder="输入你的答案" required>
                        <button type="submit">提交答案</button>
                    </form>
                </div>
            {% else %}
                <a href="/guess" class="btn" onclick="showLoader()">获取题目</a>
            {% endif %}
            
            <!-- 结果展示 -->
            {% if result %}
                <div class="result {{ 'correct' if result.is_correct else 'wrong' }}">
                    {% if result.is_correct %}
                        ✅ 恭喜答对了！
                    {% else %}
                        ❌ 正确答案：{{ result.correct_answer }}
                        <p class="user-answer">你的答案：{{ result.user_answer }}</p>
                    {% endif %}
                    <a href="/guess" class="btn">下一题</a>
                </div>
            {% endif %}
        </div>

        <!-- 题库统计 -->
        <div class="stats">
            当前题库共有 {{ riddles|length }} 道灯谜
            {% if error %}<div class="error">{{ error }}</div>{% endif %}
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
