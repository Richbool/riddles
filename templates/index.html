<!DOCTYPE html>
<html>
<head>
    <title>元宵灯谜 - xrq-rich.com</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- 灯笼容器 -->
    <div class="lanterns">
        <div class="lantern">🏮</div>
        <div class="lantern">🏮</div>
        <div class="lantern">🏮</div>
    </div>
    
    <div class="container">
        <h1>🏮 元宵灯谜大会</h1>
        
        <!-- 添加表单 -->
        <div class="card">
            <h2>📜 添加新灯谜</h2>
            <form action="/" method="post">
                <input type="text" name="riddle" placeholder="灯谜内容" required>
                <input type="text" name="answer" placeholder="正确答案" required>
                <button type="submit">💾 保存</button>
            </form>
        </div>

        <!-- 猜谜区 -->
        <div class="card">
            <h2>🔍 猜灯谜</h2>
            {% if current %}
                <div class="current-riddle">
                    {{ current }}
                    <form action="/guess" method="post">
                        <input type="text" name="answer" placeholder="输入答案" required>
                        <button type="submit">🎯 提交</button>
                    </form>
                </div>
            {% else %}
                <a href="/guess" class="btn">✨ 随机抽题</a>
            {% endif %}
            
            <!-- 结果展示 -->
            {% if result %}
                <div class="result {{ 'correct' if result.is_correct else 'wrong' }}">
                    {% if result.is_correct %}
                        <div class="celebrate">🎉 正确！</div>
                    {% else %}
                        <div class="answer-box">
                            <div>❌ 你的答案：{{ result.user_answer }}</div>
                            <div>✅ 正确答案：{{ result.correct_answer }}</div>
                        </div>
                    {% endif %}
                    <div class="actions">
                        <a href="/guess" class="btn">➡️ 下一题</a>
                        {% if not result.is_correct %}
                        <button onclick="retry()">🔄 重试</button>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>

        <!-- 题库状态 -->
        <div class="stats">
            当前题库：{{ riddles|length }} 条
            {% if error %}<div class="error">{{ error }}</div>{% endif %}
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
